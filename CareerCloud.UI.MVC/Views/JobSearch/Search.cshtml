@using System.ComponentModel
@using CareerCloud.UI.MVC.Models
@model IEnumerable<ApplicantJobSearchVM>

@{
    ViewBag.Title = "JobSearch";
}

<h2>Search Jobs</h2>
<br />

@using (Html.BeginForm())
{
    <div class="form-group input-group col-md-4">
        <input type="text" class="form-control" name="SearchString" placeholder="Enter a Job Title or CompanyName" value="@ViewBag.SearchString" />
        <span class="input-group-btn">
            <input type="submit" class="btn btn-primary" value="Search" placeholder="" />
        </span>
    </div>
}

<table class="table">
    <tr>
        <th>
            @{
                string propertyName = Html.DisplayNameFor(model => model.JobTitle).ToString();
            }

            @Html.ActionLink(propertyName,
                         "Search",
                         new { sortProperty = propertyName, sortDirection = ViewBag.JobTitleSortDirection, applicantId = ViewBag.ApplicantId })
        </th>
        <th>
            @{
                propertyName = Html.DisplayNameFor(model => model.CompanyName).ToString();
            }
            @Html.ActionLink(propertyName,
                         "Search",
                         new { sortProperty = propertyName, sortDirection = ViewBag.CompanyNameSortDirection, applicantId = ViewBag.ApplicantId })

        </th>
        <th>
            @{
                propertyName = Html.DisplayNameFor(model => model.DatePosted).ToString();
            }
            @Html.ActionLink(propertyName,
                                             "Search",
                                             new { sortProperty = propertyName, sortDirection = ViewBag.DatePostedSortDirection, applicantId = ViewBag.ApplicantId })

        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.JobTitle)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CompanyName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DatePosted)
        </td>
        <td>
            @Html.ActionLink("Details", "ShowJobDetails", new { companyId = item.CompanyId, jobId = item.JobId, applicantId = item.ApplicantId })
            @*@Html.ActionLink("Apply", "ApplyForJob", new { jobId = item.JobId, applicantId = item.ApplicantId })*@
        </td>
    </tr>
    }

</table>
